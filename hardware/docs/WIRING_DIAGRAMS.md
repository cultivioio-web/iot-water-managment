# ğŸ”Œ Wiring Diagrams

## Cultivio AquaSense Connection Guide

---

## ğŸ“‹ Overview

This document shows how to connect:
1. Ultrasonic sensor to Sensor Node
2. Water pump to Controller Node
3. Power supply to all nodes

---

## 1ï¸âƒ£ Sensor Node Wiring

### Ultrasonic Sensor Connection (JSN-SR04T)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                             â”‚
â”‚                    SENSOR NODE PCB                          â”‚
â”‚                                                             â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚    â”‚                                                  â”‚     â”‚
â”‚    â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚     â”‚
â”‚    â”‚     â”‚  ESP32-H2   â”‚                              â”‚     â”‚
â”‚    â”‚     â”‚   MINI-1    â”‚                              â”‚     â”‚
â”‚    â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚     â”‚
â”‚    â”‚                                                  â”‚     â”‚
â”‚    â”‚     J2 (JST-XH 4P)                               â”‚     â”‚
â”‚    â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚     â”‚
â”‚    â”‚     â”‚ 1  2  3  4  â”‚                              â”‚     â”‚
â”‚    â”‚     â”‚VCC TR EC GNDâ”‚                              â”‚     â”‚
â”‚    â”‚     â””â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”˜                              â”‚     â”‚
â”‚    â”‚        â”‚  â”‚  â”‚  â”‚                                â”‚     â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”¼â”€â”€â”¼â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚             â”‚  â”‚  â”‚  â”‚                                      â”‚
â”‚    USB-C    â”‚  â”‚  â”‚  â”‚                                      â”‚
â”‚    â”Œâ”€â”€â”€â”    â”‚  â”‚  â”‚  â”‚                                      â”‚
â”‚    â”‚   â”‚    â”‚  â”‚  â”‚  â”‚                                      â”‚
â”‚    â””â”€â”€â”€â”˜    â”‚  â”‚  â”‚  â”‚                                      â”‚
â”‚             â”‚  â”‚  â”‚  â”‚                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”¼â”€â”€â”¼â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚  â”‚  â”‚  â”‚
              â”‚  â”‚  â”‚  â”‚  4-Wire Cable
              â”‚  â”‚  â”‚  â”‚  (usually included with sensor)
              â”‚  â”‚  â”‚  â”‚
         â”Œâ”€â”€â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”€â”€â”
         â”‚                  â”‚
         â”‚   JSN-SR04T      â”‚
         â”‚   Control Box    â”‚
         â”‚                  â”‚
         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
         â”‚  â”‚VCC TR EC GNDâ”‚  â”‚
         â”‚  â””â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”˜  â”‚
         â”‚     â”‚  â”‚  â”‚  â”‚    â”‚
         â””â”€â”€â”€â”€â”€â”¼â”€â”€â”¼â”€â”€â”¼â”€â”€â”¼â”€â”€â”€â”€â”˜
               â”‚  â”‚  â”‚  â”‚
               â”‚  â”‚  â”‚  â”‚  Waterproof Cable
               â”‚  â”‚  â”‚  â”‚  (1-3 meters)
               â”‚  â”‚  â”‚  â”‚
         â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”€â”€â”€â”
         â”‚                    â”‚
         â”‚   â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—   â”‚  â† Ultrasonic Probe
         â”‚   â”‚  SENSOR    â”‚   â”‚    (IP67 Waterproof)
         â”‚   â”‚   HEAD     â”‚   â”‚
         â”‚   â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—   â”‚
         â”‚                    â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Wire Colors (typical):
  Red    = VCC (5V)
  Yellow = TRIG
  Green  = ECHO  
  Black  = GND
```

### Sensor Mounting in Tank

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚          WATER TANK (TOP VIEW)      â”‚
                    â”‚                                     â”‚
                    â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
                    â”‚      â”‚                       â”‚      â”‚
    Tank Lid â”€â”€â”€â”€â”€â”€â”€â”¤      â”‚    â—¯ Sensor Probe    â”‚      â”‚
                    â”‚      â”‚    mounted here      â”‚      â”‚
                    â”‚      â”‚    (facing down)     â”‚      â”‚
                    â”‚      â”‚                       â”‚      â”‚
                    â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
                    â”‚                                     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                    SIDE VIEW:
                    
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â† Tank Lid
         â”‚                              â”‚
         â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
         â”‚     â”‚ â—¯ Sensor Probe   â”‚     â”‚  â† Mount 5-10cm from top
         â”‚     â”‚ (pointing down)  â”‚     â”‚
         â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
         â”‚              â”‚               â”‚
         â”‚              â”‚ Sound waves   â”‚
         â”‚              â–¼               â”‚
         â”‚         â‰ˆâ‰ˆâ‰ˆâ‰ˆâ‰ˆâ‰ˆâ‰ˆâ‰ˆâ‰ˆâ‰ˆ          â”‚  â† Water surface
         â”‚         â‰ˆâ‰ˆâ‰ˆâ‰ˆâ‰ˆâ‰ˆâ‰ˆâ‰ˆâ‰ˆâ‰ˆ          â”‚
         â”‚         â‰ˆâ‰ˆâ‰ˆâ‰ˆâ‰ˆâ‰ˆâ‰ˆâ‰ˆâ‰ˆâ‰ˆ          â”‚
         â”‚         â‰ˆâ‰ˆâ‰ˆâ‰ˆâ‰ˆâ‰ˆâ‰ˆâ‰ˆâ‰ˆâ‰ˆ          â”‚
         â”‚         â‰ˆâ‰ˆâ‰ˆâ‰ˆâ‰ˆâ‰ˆâ‰ˆâ‰ˆâ‰ˆâ‰ˆ          â”‚
    â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•  â† Tank Bottom

    Measurements:
    - H_total: Total tank height
    - H_sensor: Distance from sensor to tank bottom
    - H_empty: Reading when tank empty
    - H_full: Reading when tank full (min 25cm!)
    - Water Level = H_sensor - Current Reading
```

---

## 2ï¸âƒ£ Controller Node Wiring

### Pump Connection (230V AC)

```
âš ï¸ WARNING: HIGH VOLTAGE (230V AC)
   - Turn OFF mains before wiring
   - Use proper wire gauges
   - Follow local electrical codes
   - Consider hiring an electrician

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                             â”‚
â”‚                  CONTROLLER NODE PCB                        â”‚
â”‚                                                             â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚    â”‚                                                  â”‚     â”‚
â”‚    â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚     â”‚
â”‚    â”‚     â”‚  ESP32-H2   â”‚      â”‚   RELAY   â”‚          â”‚     â”‚
â”‚    â”‚     â”‚   MINI-1    â”‚      â”‚  (K1)     â”‚          â”‚     â”‚
â”‚    â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚     â”‚
â”‚    â”‚                                                  â”‚     â”‚
â”‚    â”‚     J2 (Output)          J3 (Input)             â”‚     â”‚
â”‚    â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚     â”‚
â”‚    â”‚     â”‚ COM  NO â”‚          â”‚  L   N  â”‚            â”‚     â”‚
â”‚    â”‚     â””â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”˜          â””â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”˜            â”‚     â”‚
â”‚    â”‚        â”‚   â”‚                â”‚   â”‚               â”‚     â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚             â”‚   â”‚                â”‚   â”‚                      â”‚
â”‚    USB-C    â”‚   â”‚                â”‚   â”‚                      â”‚
â”‚    â”Œâ”€â”€â”€â”    â”‚   â”‚                â”‚   â”‚                      â”‚
â”‚    â”‚   â”‚    â”‚   â”‚                â”‚   â”‚                      â”‚
â”‚    â””â”€â”€â”€â”˜    â”‚   â”‚                â”‚   â”‚                      â”‚
â”‚             â”‚   â”‚                â”‚   â”‚                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚   â”‚                â”‚   â”‚
              â”‚   â”‚                â”‚   â”‚
              â”‚   â”‚                â”‚   â”‚
              â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
              â”‚         Jumper         â”‚
              â”‚      (Live through     â”‚
              â”‚        relay)          â”‚
              â”‚                        â”‚
              â”‚                        â”‚
         To Pump                  From MCB
         Motor                   (Mains Supply)
```

### Detailed Wiring Diagram

```
        MAINS SUPPLY                    WATER PUMP
        â•â•â•â•â•â•â•â•â•â•â•                    â•â•â•â•â•â•â•â•â•â•â•
             â”‚                              â”‚
             â”‚                              â”‚
        â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
        â”‚   MCB   â”‚                    â”‚  MOTOR  â”‚
        â”‚  16A    â”‚                    â”‚  0.5HP  â”‚
        â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
             â”‚                              â”‚
        Lâ”€â”€â”€â”€â”¼â”€â”€â”€â”€N                    Lâ”€â”€â”€â”€â”¼â”€â”€â”€â”€N
             â”‚    â”‚                         â”‚    â”‚
             â”‚    â”‚                         â”‚    â”‚
             â”‚    â”‚    CONTROLLER NODE      â”‚    â”‚
             â”‚    â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚
             â”‚    â”‚    â”‚                â”‚   â”‚    â”‚
             â”‚    â””â”€â”€â”€â”€â”¤ J3-N (Neutral) â”‚â”€â”€â”€â”¼â”€â”€â”€â”€â”˜
             â”‚         â”‚                â”‚   â”‚
             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ J3-L (Live In) â”‚   â”‚
                       â”‚                â”‚   â”‚
                       â”‚     RELAY      â”‚   â”‚
                       â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”    â”‚   â”‚
                       â”‚   â”‚ â—â”€â”€â”€â— â”‚â”€â”€â”€â”€â”¼â”€â”€â”€â”˜
                       â”‚   â”‚ COM NOâ”‚    â”‚   To Pump Live
                       â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
                       â”‚   J2 (Output)  â”‚
                       â”‚                â”‚
                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    Wire Gauge Recommendations:
    - Mains to Controller: 1.5mmÂ² (16A)
    - Controller to Pump: 1.5mmÂ² (16A)
    - Earth/Ground: 1.5mmÂ² (connect to pump body)
```

### Single-Phase Pump Wiring (Common in India)

```
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                                                          â”‚
    â”‚           ELECTRICAL PANEL                               â”‚
    â”‚                                                          â”‚
    â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                           â”‚
    â”‚    â”‚  MAIN   â”‚                                           â”‚
    â”‚    â”‚  MCB    â”‚                                           â”‚
    â”‚    â”‚  32A    â”‚                                           â”‚
    â”‚    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                                           â”‚
    â”‚         â”‚                                                â”‚
    â”‚    Lâ”€â”€â”€â”€â”¼â”€â”€â”€â”€Nâ”€â”€â”€â”€E                                      â”‚
    â”‚         â”‚    â”‚    â”‚                                      â”‚
    â”‚    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”                                 â”‚
    â”‚    â”‚                   â”‚                                 â”‚
    â”‚    â”‚   PUMP MCB        â”‚                                 â”‚
    â”‚    â”‚   16A             â”‚                                 â”‚
    â”‚    â”‚                   â”‚                                 â”‚
    â”‚    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                                 â”‚
    â”‚         â”‚    â”‚    â”‚                                      â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚    â”‚    â”‚
              â”‚    â”‚    â”‚  To Controller (3-wire)
              â”‚    â”‚    â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚         â”‚    â”‚    â”‚                                      â”‚
    â”‚    CONTROLLER NODE                                       â”‚
    â”‚         â”‚    â”‚    â”‚                                      â”‚
    â”‚    J3-Lâ”€â”˜    â”‚    â”‚                                      â”‚
    â”‚    J3-Nâ”€â”€â”€â”€â”€â”€â”˜    â”‚                                      â”‚
    â”‚    GNDâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ (to enclosure)                       â”‚
    â”‚                                                          â”‚
    â”‚    J2-COM â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
    â”‚    J2-NO â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚                     â”‚
    â”‚                                â”‚   â”‚                     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚   â”‚
                                     â”‚   â”‚  To Pump (2-wire + Earth)
                                     â”‚   â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                                â”‚   â”‚                     â”‚
    â”‚    WATER PUMP (0.5HP)          â”‚   â”‚                     â”‚
    â”‚                                â”‚   â”‚                     â”‚
    â”‚    Live (from NO) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚                     â”‚
    â”‚    Neutral (from N) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
    â”‚    Earth â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ to ground rod      â”‚
    â”‚                                                          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3ï¸âƒ£ Router Node Wiring

### Simple - Power Only!

```
    Router Node has no external connections except power.

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                                 â”‚
    â”‚        ROUTER NODE              â”‚
    â”‚                                 â”‚
    â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
    â”‚    â”‚                       â”‚    â”‚
    â”‚    â”‚     ESP32-H2          â”‚    â”‚
    â”‚    â”‚     MINI-1            â”‚    â”‚
    â”‚    â”‚                       â”‚    â”‚
    â”‚    â”‚     â—‹ â—‹  LEDs         â”‚    â”‚
    â”‚    â”‚                       â”‚    â”‚
    â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
    â”‚                                 â”‚
    â”‚         USB-C Port              â”‚
    â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”               â”‚
    â”‚         â”‚       â”‚               â”‚
    â”‚         â””â”€â”€â”€â”¬â”€â”€â”€â”˜               â”‚
    â”‚             â”‚                   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â”‚  USB-C Cable
                  â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                 â”‚
         â”‚  USB Charger    â”‚
         â”‚  5V / 1A+       â”‚
         â”‚                 â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
             â•â•â•â•â•â•§â•â•â•â•â•
             Wall Socket
             230V AC
```

---

## 4ï¸âƒ£ Complete System Wiring

### Basic Kit (2 Nodes)

```
                                        OVERHEAD TANK
                                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                        â”‚                   â”‚
                                        â”‚   â—¯ Sensor Probe  â”‚
                                        â”‚   â”‚               â”‚
                                        â”‚   â”‚               â”‚
                                        â”‚  â‰ˆâ‰ˆâ‰ˆ Water â‰ˆâ‰ˆâ‰ˆ   â”‚
                                        â”‚                   â”‚
                                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                  â”‚
                        Sensor Cable (1-3m)       â”‚
                                                  â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                                             â”‚          â”‚
    â”‚     SENSOR NODE                             â”‚          â”‚
    â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚          â”‚
    â”‚     â”‚                      â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
    â”‚     â”‚  ESP32-H2            â”‚   JSN-SR04T               â”‚
    â”‚     â”‚                      â”‚   Waterproof Sensor       â”‚
    â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
    â”‚                â”‚ USB-C                                 â”‚
    â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
    â”‚     â”‚    USB Charger       â”‚                           â”‚
    â”‚     â”‚    5V / 1A           â”‚                           â”‚
    â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
    â”‚                                                        â”‚
    â”‚                     ~~~~ Zigbee Wireless ~~~~          â”‚
    â”‚                              (up to 30m)               â”‚
    â”‚                                                        â”‚
    â”‚     CONTROLLER NODE                                    â”‚
    â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
    â”‚     â”‚                      â”‚                           â”‚
    â”‚     â”‚  ESP32-H2            â”‚                           â”‚
    â”‚     â”‚  + Relay             â”‚                           â”‚
    â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
    â”‚                â”‚ USB-C                                 â”‚
    â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
    â”‚     â”‚    USB Charger       â”‚    â”‚   To Pump Motor  â”‚   â”‚
    â”‚     â”‚    5V / 1A           â”‚    â”‚   (via Relay)    â”‚   â”‚
    â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
    â”‚                                          â”‚             â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                               â”‚
                                        â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
                                        â”‚             â”‚
                                        â”‚  WATER PUMP â”‚
                                        â”‚  0.5-1 HP   â”‚
                                        â”‚             â”‚
                                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Extended Kit (3 Nodes) - Multi-Story Building

```
    5th FLOOR - TANK                    
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                                                         â”‚
    â”‚     OVERHEAD TANK                                       â”‚
    â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                 â”‚
    â”‚     â”‚                 â”‚                                 â”‚
    â”‚     â”‚  â—¯ Sensor       â”‚                                 â”‚
    â”‚     â”‚  â”‚              â”‚                                 â”‚
    â”‚     â”‚ â‰ˆâ‰ˆâ‰ˆ Water â‰ˆâ‰ˆâ‰ˆ  â”‚                                 â”‚
    â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                 â”‚
    â”‚              â”‚                                          â”‚
    â”‚     SENSOR NODE (near tank)                             â”‚
    â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚
    â”‚     â”‚   ESP32-H2       â”‚                                â”‚
    â”‚     â”‚   + Sensor       â”‚                                â”‚
    â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚
    â”‚              â”‚                                          â”‚
    â”‚              â”‚ Zigbee (~10-15m through walls)           â”‚
    â”‚              â–¼                                          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    
    3rd FLOOR - ROUTER
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                                                         â”‚
    â”‚     ROUTER NODE (mid-point)                             â”‚
    â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚
    â”‚     â”‚   ESP32-H2       â”‚ â—„â”€â”€ Plug into any USB outlet   â”‚
    â”‚     â”‚   Range Extender â”‚                                â”‚
    â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚
    â”‚              â”‚                                          â”‚
    â”‚              â”‚ Zigbee (~10-15m through walls)           â”‚
    â”‚              â–¼                                          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    
    GROUND FLOOR - PUMP
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                                                         â”‚
    â”‚     CONTROLLER NODE (near pump/electrical panel)        â”‚
    â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚
    â”‚     â”‚   ESP32-H2       â”‚                                â”‚
    â”‚     â”‚   + Relay        â”œâ”€â”€â”€â”€â”€â”€â”€â”                        â”‚
    â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚                        â”‚
    â”‚                                â”‚                        â”‚
    â”‚                         â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”                 â”‚
    â”‚                         â”‚             â”‚                 â”‚
    â”‚                         â”‚  WATER PUMP â”‚                 â”‚
    â”‚                         â”‚             â”‚                 â”‚
    â”‚                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
    â”‚                                                         â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5ï¸âƒ£ Power Supply Options

### Option A: Individual USB Chargers (Recommended)

```
    Each node gets its own USB charger:

    Sensor Node â”€â”€â”€â”€ USB-C â”€â”€â”€â”€ 5V/1A Charger â”€â”€â”€â”€ Wall Socket
    
    Controller Node â”€â”€ USB-C â”€â”€ 5V/2A Charger â”€â”€ Wall Socket
    
    Router Node â”€â”€â”€â”€ USB-C â”€â”€â”€â”€ 5V/1A Charger â”€â”€â”€â”€ Wall Socket

    Advantages:
    âœ“ Simple installation
    âœ“ Isolated power (failure of one doesn't affect others)
    âœ“ Uses standard phone chargers
    âœ“ Easy replacement
```

### Option B: Shared 5V Power Supply

```
    For permanent installations:

                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                             â”‚
    230V AC â”€â”€â”€â”€â”€â”€â”€â”€â”¤   SMPS 5V/3A Power Supply   â”‚
                    â”‚                             â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                    5V DC Rail â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                                   â”‚             â”‚
                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”     â”‚
                           â”‚               â”‚     â”‚
                    Sensor Node    Controller Node
                    
    âš ï¸ Use fuses/polyfuses on each branch!
```

---

## ğŸ“‹ Wire Specifications

### Recommended Wire Gauges

| Connection | Voltage | Current | Wire Gauge |
|------------|---------|---------|------------|
| USB Power | 5V DC | 1-2A | USB-C cable |
| Sensor Cable | 5V DC | <100mA | 24-26 AWG |
| Pump Mains | 230V AC | 5-10A | 1.5mmÂ² |
| Earth | - | - | 1.5mmÂ² |

### Cable Types

| Use | Recommended Cable |
|-----|-------------------|
| Sensor (indoor) | 4-core shielded cable |
| Sensor (outdoor) | 4-core outdoor/UV resistant |
| Pump (indoor) | 3-core flex (1.5mmÂ²) |
| Pump (outdoor) | Armored cable |

---

## âš ï¸ Safety Notes

```
ELECTRICAL SAFETY:

1. Always turn OFF mains before wiring
2. Use proper MCB/fuse protection
3. Earth all metal enclosures
4. Use IP65+ enclosures outdoors
5. Keep 230V and 5V wiring separate
6. Label all wires clearly
7. Test with multimeter before power on
8. Consider hiring licensed electrician

WATER SAFETY:

1. Use waterproof sensor (IP67)
2. Seal cable entry points
3. Mount sensor away from water inlet
4. Don't submerge control boxes
5. Use cable glands for outdoor runs
```

---

*See ASSEMBLY_GUIDE.md for assembly instructions*
*See TEST_PROCEDURES.md for testing checklist*

